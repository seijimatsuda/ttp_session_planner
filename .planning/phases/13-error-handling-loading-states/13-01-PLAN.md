---
phase: 13-error-handling-loading-states
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/lib/errors.ts
autonomous: true

must_haves:
  truths:
    - "Technical error messages are converted to user-friendly text"
    - "Supabase auth errors map to specific helpful messages"
    - "Network errors display actionable guidance"
  artifacts:
    - path: "frontend/src/lib/errors.ts"
      provides: "getUserFriendlyError helper function"
      exports: ["getUserFriendlyError"]
  key_links: []
---

<objective>
Create centralized error message helper for consistent, user-friendly error feedback across the application.

Purpose: All async operations should display helpful messages instead of technical errors. This utility will be used by auth pages, mutations, and any error-handling code.

Output: `getUserFriendlyError()` function that converts Supabase auth errors, network errors, and generic errors into actionable user messages.
</objective>

<execution_context>
@/Users/seijimatsuda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/seijimatsuda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-error-handling-loading-states/13-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create error helper utility</name>
  <files>frontend/src/lib/errors.ts</files>
  <action>
Create a new file `frontend/src/lib/errors.ts` with a `getUserFriendlyError()` function that:

1. Accepts `unknown` error type for maximum flexibility
2. Handles Supabase auth error patterns:
   - "Invalid login credentials" -> "Email or password is incorrect."
   - "Email not confirmed" -> "Please confirm your email before logging in."
   - "User already registered" -> "An account with this email already exists."
   - "Password should be at least" -> "Password must be at least 6 characters."
3. Handles network errors:
   - "Failed to fetch" or "Network" -> "Network error. Please check your connection and try again."
4. Handles generic Supabase errors:
   - If error has message property, return it (already user-friendly from Supabase)
5. Falls back to: "Something went wrong. Please try again."

Export the function for use across the application.

Pattern from RESEARCH.md:
```typescript
export function getUserFriendlyError(error: unknown): string {
  if (error && typeof error === 'object' && 'message' in error) {
    const message = String(error.message);

    // Auth error patterns
    if (message.includes('Invalid login credentials')) {
      return 'Email or password is incorrect.';
    }
    // ... more patterns
  }
  return 'Something went wrong. Please try again.';
}
```
  </action>
  <verify>
- File exists at frontend/src/lib/errors.ts
- TypeScript compiles without errors: `cd frontend && npx tsc --noEmit`
- Function is exported and can be imported
  </verify>
  <done>
- getUserFriendlyError function handles all documented error patterns
- Function exported from frontend/src/lib/errors.ts
- TypeScript types are correct (accepts unknown, returns string)
  </done>
</task>

</tasks>

<verification>
1. Run TypeScript compiler to verify no type errors:
   ```bash
   cd frontend && npx tsc --noEmit
   ```
2. Verify file exists and exports function:
   ```bash
   grep "export function getUserFriendlyError" frontend/src/lib/errors.ts
   ```
</verification>

<success_criteria>
- [ ] frontend/src/lib/errors.ts exists
- [ ] getUserFriendlyError function exported
- [ ] Function handles Supabase auth errors (invalid credentials, email not confirmed, user registered)
- [ ] Function handles network errors
- [ ] Function provides fallback message
- [ ] TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-error-handling-loading-states/13-01-SUMMARY.md`
</output>
