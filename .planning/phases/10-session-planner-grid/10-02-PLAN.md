---
phase: 10-session-planner-grid
plan: 02
type: execute
wave: 2
depends_on: ["10-01"]
files_modified:
  - frontend/src/components/sessions/GridCell.tsx
  - frontend/src/components/sessions/DraggableDrillCard.tsx
  - frontend/src/components/sessions/SessionGrid.tsx
  - frontend/src/components/sessions/DrillLibrarySidebar.tsx
  - frontend/src/components/sessions/index.ts
autonomous: true

must_haves:
  truths:
    - "GridCell shows droppable zone with visual feedback when item dragged over"
    - "DraggableDrillCard can be dragged on both desktop and iPad"
    - "SessionGrid renders 4 rows x 3 columns with labeled row headers"
    - "DrillLibrarySidebar shows user's drills from useDrills hook"
  artifacts:
    - path: "frontend/src/components/sessions/GridCell.tsx"
      provides: "Droppable cell with isOver visual feedback and remove button"
      exports: ["GridCell"]
    - path: "frontend/src/components/sessions/DraggableDrillCard.tsx"
      provides: "Draggable drill card with click selection state"
      exports: ["DraggableDrillCard"]
    - path: "frontend/src/components/sessions/SessionGrid.tsx"
      provides: "4x3 grid layout with row labels"
      exports: ["SessionGrid"]
    - path: "frontend/src/components/sessions/DrillLibrarySidebar.tsx"
      provides: "Scrollable list of draggable drills"
      exports: ["DrillLibrarySidebar"]
    - path: "frontend/src/components/sessions/index.ts"
      provides: "Barrel exports for session components"
      exports: ["GridCell", "DraggableDrillCard", "SessionGrid", "DrillLibrarySidebar"]
  key_links:
    - from: "frontend/src/components/sessions/GridCell.tsx"
      to: "@dnd-kit/core"
      via: "useDroppable hook"
      pattern: "useDroppable"
    - from: "frontend/src/components/sessions/DraggableDrillCard.tsx"
      to: "@dnd-kit/core"
      via: "useDraggable hook"
      pattern: "useDraggable"
    - from: "frontend/src/components/sessions/DrillLibrarySidebar.tsx"
      to: "frontend/src/hooks/useDrills.ts"
      via: "useDrills hook for data"
      pattern: "useDrills"
---

<objective>
Create the core UI components for the session planner grid: droppable cells, draggable drill cards, and layout containers.

Purpose: Build reusable components that handle drag-and-drop interactions with proper visual feedback for both desktop and iPad.
Output: GridCell, DraggableDrillCard, SessionGrid, and DrillLibrarySidebar components.
</objective>

<execution_context>
@/Users/seijimatsuda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/seijimatsuda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-session-planner-grid/10-RESEARCH.md
@.planning/phases/10-session-planner-grid/10-01-SUMMARY.md

@frontend/src/types/session-grid.ts
@frontend/src/lib/database.types.ts
@frontend/src/hooks/useDrills.ts
@frontend/src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GridCell and DraggableDrillCard components</name>
  <files>
frontend/src/components/sessions/GridCell.tsx
frontend/src/components/sessions/DraggableDrillCard.tsx
  </files>
  <action>
**Create `frontend/src/components/sessions/GridCell.tsx`:**

Droppable cell component for the 4x3 grid:
- Props: cellKey, drill (Drill | null), onRemove, onClick, isTargeted (for click-to-place)
- Use `useDroppable({ id: cellKey })` from @dnd-kit/core
- Visual states using cn() utility:
  - Empty: dashed border, gray
  - Has drill: solid border, white background, show drill name + remove button
  - isOver (dragging over): blue border, light blue background
  - isTargeted (click-to-place active): ring-2 ring-blue-500
- Remove button: 44px min touch target (min-h-11 min-w-11), calls onRemove(cellKey)
- onClick handler for click-to-place support
- Minimum cell height: min-h-24 for touch targets

```typescript
import { useDroppable } from '@dnd-kit/core'
import { cn } from '@/lib/utils'
import type { Drill } from '@/lib/database.types'
import type { CellKey } from '@/types/session-grid'

interface GridCellProps {
  cellKey: CellKey
  drill: Drill | null
  onRemove: (cellKey: CellKey) => void
  onClick: (cellKey: CellKey) => void
  isTargeted: boolean
}
```

**Create `frontend/src/components/sessions/DraggableDrillCard.tsx`:**

Draggable drill card for the library sidebar:
- Props: drill, isSelected, onClick
- Use `useDraggable({ id: drill.id })` from @dnd-kit/core
- Apply CSS transform from dnd-kit utilities: `CSS.Translate.toString(transform)`
- Visual states:
  - Normal: white background, shadow, cursor-grab
  - isDragging: opacity-50, cursor-grabbing
  - isSelected: ring-2 ring-blue-500, bg-blue-50
- Include touch-action-manipulation class for touch scroll compatibility
- Show drill name and category (capitalized)
- Spread {...listeners} and {...attributes} on the element

```typescript
import { useDraggable } from '@dnd-kit/core'
import { CSS } from '@dnd-kit/utilities'
import { cn } from '@/lib/utils'
import type { Drill } from '@/lib/database.types'
```
  </action>
  <verify>
```bash
cd frontend && npx tsc --noEmit
```
No type errors. Components use proper dnd-kit hooks.
  </verify>
  <done>GridCell is droppable with visual feedback; DraggableDrillCard is draggable with transform applied</done>
</task>

<task type="auto">
  <name>Task 2: Create SessionGrid and DrillLibrarySidebar components</name>
  <files>
frontend/src/components/sessions/SessionGrid.tsx
frontend/src/components/sessions/DrillLibrarySidebar.tsx
  </files>
  <action>
**Create `frontend/src/components/sessions/SessionGrid.tsx`:**

4x3 grid layout component:
- Props: gridData, drills (Map<string, Drill> for lookup), onCellClick, onRemoveDrill, targetedCellKey
- Use ROW_KEYS and COL_COUNT from session-grid types
- Layout structure:
  - Outer container with CSS grid: grid-cols-[auto_repeat(3,1fr)]
  - First column: row labels (Activation, Dribbling, Passing, Shooting)
  - Remaining 3 columns: GridCell components
- Row labels: capitalize first letter, vertical center alignment
- Use getCellKey(row, col) to generate cell keys
- Pass drill={drills.get(gridData.cells[cellKey]?.drillId ?? '')} to each GridCell
- Gap between cells: gap-2 or gap-3

```typescript
import { GridCell } from './GridCell'
import { ROW_KEYS, COL_COUNT, getCellKey } from '@/types/session-grid'
import type { GridData, Drill } from '@/lib/database.types'
```

**Create `frontend/src/components/sessions/DrillLibrarySidebar.tsx`:**

Scrollable sidebar with draggable drills:
- Props: drills (Drill[]), selectedDrillId, onDrillClick, isLoading
- Layout: fixed width (w-72 or w-80), overflow-y-auto, max height for scrolling
- Header: "Drill Library" with count
- Loading state: show 3-4 Skeleton placeholders
- Empty state: "No drills yet" message with link to create
- Map drills to DraggableDrillCard components
- Pass isSelected={drill.id === selectedDrillId} for click-to-place highlighting
- Instruction text at bottom: "Drag a drill to the grid, or click to select then click a cell"
  </action>
  <verify>
```bash
cd frontend && npx tsc --noEmit
```
No type errors. SessionGrid renders 4 rows x 3 cols. DrillLibrarySidebar maps drills.
  </verify>
  <done>SessionGrid displays 4x3 layout with labels; DrillLibrarySidebar shows scrollable drill list</done>
</task>

<task type="auto">
  <name>Task 3: Create barrel export for session components</name>
  <files>frontend/src/components/sessions/index.ts</files>
  <action>
Create `frontend/src/components/sessions/index.ts` with barrel exports:

```typescript
export { GridCell, type GridCellProps } from './GridCell'
export { DraggableDrillCard, type DraggableDrillCardProps } from './DraggableDrillCard'
export { SessionGrid, type SessionGridProps } from './SessionGrid'
export { DrillLibrarySidebar, type DrillLibrarySidebarProps } from './DrillLibrarySidebar'
```

Export both components and their prop types for external use.
  </action>
  <verify>
```bash
cd frontend && npx tsc --noEmit
```
Barrel exports work, no circular dependency issues.
  </verify>
  <done>Session components barrel export created at components/sessions/index.ts</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Verify TypeScript compilation:
```bash
cd frontend && npx tsc --noEmit
```

2. Verify imports work:
```bash
cd frontend && node -e "console.log('Import check would verify barrel exports')"
```

3. Check file structure:
```bash
ls -la frontend/src/components/sessions/
```
Should show: GridCell.tsx, DraggableDrillCard.tsx, SessionGrid.tsx, DrillLibrarySidebar.tsx, index.ts
</verification>

<success_criteria>
- GridCell uses useDroppable, shows visual feedback for isOver and isTargeted states
- DraggableDrillCard uses useDraggable, applies CSS transform, shows selection state
- SessionGrid renders 4 rows x 3 columns with row labels (Activation, Dribbling, Passing, Shooting)
- DrillLibrarySidebar shows drills from props with loading/empty states
- All components have 44px minimum touch targets where applicable
- Barrel export at components/sessions/index.ts
- All TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/10-session-planner-grid/10-02-SUMMARY.md`
</output>
