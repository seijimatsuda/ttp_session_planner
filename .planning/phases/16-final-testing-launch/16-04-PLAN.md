---
phase: 16-final-testing-launch
plan: 04
type: execute
wave: 3
depends_on: ["16-02", "16-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Complete user workflow verified in production (signup → drill → session)"
    - "Production deployment confirmed stable"
    - "All v1 requirements verified working"
    - "Launch checklist completed"
  artifacts:
    - path: ".planning/phases/16-final-testing-launch/16-04-FINAL-VERIFICATION.md"
      provides: "Final launch verification and sign-off"
      contains: "Launch Readiness Checklist"
  key_links:
    - from: "All testing phases"
      to: "Production launch"
      via: "Final verification"
      pattern: "LAUNCH APPROVED|Ready for launch"
---

<objective>
Execute final production smoke tests and complete launch verification

Purpose: Perform end-to-end verification of the complete user workflow in production, consolidate all testing results, and provide final launch sign-off with rollback plan documented.

Output: Final verification document with launch approval status and complete testing summary
</objective>

<execution_context>
@/Users/seijimatsuda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/seijimatsuda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-final-testing-launch/16-RESEARCH.md
@.planning/phases/16-final-testing-launch/16-01-SUMMARY.md
@.planning/phases/16-final-testing-launch/16-02-SUMMARY.md
@.planning/phases/16-final-testing-launch/16-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Execute production smoke tests</name>
  <files></files>
  <action>
Execute complete end-to-end smoke test on production environment.
This validates the entire user workflow with real data creation.

**Environment Verification:**
1. curl https://ttp-session-planner.vercel.app (expect 200)
2. curl https://ttp-session-planner.onrender.com/health (expect 200)

**Complete User Workflow (Chrome):**

Step 1: Account Creation
- Navigate to https://ttp-session-planner.vercel.app/signup
- Create account: smoke-test-final+[timestamp]@example.com
- Password: SmokeTest123!
- Verify redirect to /drills or /dashboard
- Note: This creates real data in production

Step 2: First Drill Creation
- Navigate to /drills/new
- Create drill:
  - Name: "Final Smoke Test - Passing Drill"
  - Category: Passing
  - Description: "Production smoke test drill"
  - Players: 6
  - Equipment: cones, balls
  - Tags: smoke-test, production
- Submit and verify redirect to detail page

Step 3: Media Upload
- Edit the smoke test drill
- Upload a small test video (< 5MB .mp4)
- Verify upload progress shows
- Verify upload completes
- Navigate to drill detail
- Play video and verify playback

Step 4: Second Drill Creation
- Create another drill:
  - Name: "Final Smoke Test - Shooting Drill"
  - Category: Shooting
- This ensures we have multiple drills for session testing

Step 5: Drill Library Verification
- Navigate to /drills
- Verify both smoke test drills appear
- Search for "Smoke Test"
- Verify filter works
- Filter by category "Passing"
- Verify correct drill shows

Step 6: Session Creation
- Navigate to /sessions/new
- Verify drill library sidebar shows both drills
- Drag "Passing Drill" into Passing row, column 1
- Drag "Shooting Drill" into Shooting row, column 1
- Save session: "Final Smoke Test Session"
- Verify save completes

Step 7: Session Loading
- Navigate to /sessions
- Verify "Final Smoke Test Session" appears
- Load the session
- Verify drills are in correct grid positions

Step 8: Edit and Re-save
- Move a drill to different cell
- Save (should update existing session)
- Reload and verify change persisted

Step 9: Cleanup (Optional)
- Delete the smoke test session
- Delete the smoke test drills
- Or leave as production test data

Document each step with PASS/FAIL and any notes.
  </action>
  <verify>
Complete user workflow (signup → drill creation → video upload → session planning → save/load) passes
  </verify>
  <done>
Production smoke tests pass - real drill and session creation verified
  </done>
</task>

<task type="auto">
  <name>Task 2: Consolidate all test results and verify requirements</name>
  <files></files>
  <action>
Review all previous test results and verify v1 requirements:

**Load Previous Test Results:**
- 16-01-VERIFICATION.md (pre-deployment)
- 16-02-DESKTOP-TESTS.md (desktop browsers)
- 16-03-MOBILE-TESTS.md (mobile/tablet)

**Requirements Verification Matrix:**

AUTH Requirements:
- [ ] AUTH-01: User can sign up with email and password
- [ ] AUTH-02: User can log in with email and password
- [ ] AUTH-03: User session persists across browser refreshes
- [ ] AUTH-04: Unauthenticated users redirected to login
- [ ] AUTH-05: User can log out from any page

DATA Requirements:
- [ ] DATA-01: Drills table with RLS
- [ ] DATA-02: Sessions table with RLS
- [ ] DATA-03: TypeScript types match schema
- [ ] DATA-04: React Query hooks available

MEDIA Requirements:
- [ ] MEDIA-01: Video upload (MP4, MOV, M4V, WebM up to 100MB)
- [ ] MEDIA-02: Image upload (JPG, PNG, GIF, WebP)
- [ ] MEDIA-03: Upload progress indicator
- [ ] MEDIA-04: Videos play on iOS Safari
- [ ] MEDIA-05: Video scrubbing works on iOS
- [ ] MEDIA-06: User can delete uploaded media

DRILL Requirements:
- [ ] DRILL-01: Create drill with name and category
- [ ] DRILL-02: Attach video or image during creation
- [ ] DRILL-03: Add optional metadata (players, equipment, tags, URL)
- [ ] DRILL-04: Drills display in responsive grid
- [ ] DRILL-05: Search drills by name
- [ ] DRILL-06: Filter drills by category
- [ ] DRILL-07: View full drill details with media
- [ ] DRILL-08: Edit any field of existing drill
- [ ] DRILL-09: Delete drill with confirmation

SESSION Requirements:
- [ ] SESS-01: 4x3 grid with labeled rows
- [ ] SESS-02: Drag drills from library on desktop
- [ ] SESS-03: Drag drills from library on iPad touch
- [ ] SESS-04: Click drill then click cell alternative
- [ ] SESS-05: Remove drill from grid cell
- [ ] SESS-06: Save session with name
- [ ] SESS-07: View list of saved sessions
- [ ] SESS-08: Load saved session
- [ ] SESS-09: Edit existing session
- [ ] SESS-10: Delete session with confirmation

UI Requirements:
- [ ] UI-01: Layout adapts on desktop, tablet, mobile
- [ ] UI-02: 44px minimum touch targets
- [ ] UI-03: Loading states with skeletons
- [ ] UI-04: Toast notifications for feedback
- [ ] UI-05: User-friendly error messages
- [ ] UI-06: Dashboard with quick actions

Mark each requirement as VERIFIED based on test results.
  </action>
  <verify>
All v1 requirements mapped to test results with verification status
  </verify>
  <done>
All requirements verified against test results, any gaps identified
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Final production verification completed:
1. Production smoke tests executed (real drill and session creation)
2. All v1 requirements verified against test results
3. All browser and device testing consolidated
4. Launch readiness assessment prepared
  </what-built>
  <how-to-verify>
1. Review .planning/phases/16-final-testing-launch/16-04-FINAL-VERIFICATION.md
2. Confirm all critical requirements are marked VERIFIED
3. Review any outstanding issues and their severity
4. Confirm production environment is stable
5. Confirm rollback plan is documented

Launch approval decision:
- APPROVED: All critical paths work, minor issues documented
- CONDITIONAL: Critical issues need monitoring, soft launch recommended
- BLOCKED: Critical issues must be fixed before launch
  </how-to-verify>
  <resume-signal>
Type "launch approved" to sign off on production launch
Type "conditional: [conditions]" for conditional approval with monitoring
Type "blocked: [issues]" if critical issues prevent launch
  </resume-signal>
</task>

<task type="auto">
  <name>Task 3: Create final verification and launch document</name>
  <files>.planning/phases/16-final-testing-launch/16-04-FINAL-VERIFICATION.md</files>
  <action>
Create final launch verification document:

```markdown
# Phase 16-04: Final Launch Verification

**Verified:** [date]
**Status:** [LAUNCH APPROVED / CONDITIONAL / BLOCKED]
**Sign-off:** [user confirmation]

## Production Environment

| Service | URL | Status |
|---------|-----|--------|
| Frontend | https://ttp-session-planner.vercel.app | |
| Backend | https://ttp-session-planner.onrender.com | |
| Supabase | https://cvzffawyjrgubhkzuwkd.supabase.co | |

## Production Smoke Test Results

| Step | Action | Status | Notes |
|------|--------|--------|-------|
| 1 | Account creation | | |
| 2 | First drill creation | | |
| 3 | Media upload + playback | | |
| 4 | Second drill creation | | |
| 5 | Drill library + search | | |
| 6 | Session creation | | |
| 7 | Session loading | | |
| 8 | Session edit + re-save | | |

## Requirements Verification Summary

### Authentication (5/5 required)
- [ ] AUTH-01: Signup ✓
- [ ] AUTH-02: Login ✓
- [ ] AUTH-03: Session persistence ✓
- [ ] AUTH-04: Protected routes ✓
- [ ] AUTH-05: Logout ✓

### Data (4/4 required)
- [ ] DATA-01: Drills RLS ✓
- [ ] DATA-02: Sessions RLS ✓
- [ ] DATA-03: TypeScript types ✓
- [ ] DATA-04: React Query ✓

### Media (6/6 required)
- [ ] MEDIA-01: Video upload ✓
- [ ] MEDIA-02: Image upload ✓
- [ ] MEDIA-03: Progress indicator ✓
- [ ] MEDIA-04: iOS video playback ✓
- [ ] MEDIA-05: iOS video scrubbing ✓
- [ ] MEDIA-06: Media deletion ✓

### Drills (9/9 required)
- [ ] DRILL-01 through DRILL-09: All verified ✓

### Sessions (10/10 required)
- [ ] SESS-01 through SESS-10: All verified ✓

### UI (6/6 required)
- [ ] UI-01 through UI-06: All verified ✓

**Total: [XX]/40 requirements verified**

## Browser Testing Summary

| Platform | Status | Critical Issues |
|----------|--------|-----------------|
| Chrome (Desktop) | | |
| Safari (Desktop) | | |
| Firefox (Desktop) | | |
| Edge (Desktop) | | |
| iPad Safari | | |
| iPhone Safari | | |
| Android Chrome | | |

## Known Issues

### Will Fix Post-Launch
1. [Issue description] - [severity: minor]

### Accepted Limitations
1. [Limitation] - [reason for acceptance]

## Rollback Plan

**Frontend (Vercel):**
1. Go to Vercel Dashboard → Deployments
2. Find previous stable deployment
3. Click "..." menu → "Promote to Production"
4. Verify rollback at production URL

**Backend (Render):**
1. Go to Render Dashboard → Service → Events
2. Find previous deploy
3. Click "Manual Deploy" with previous commit SHA
4. Or: Push revert commit to trigger redeploy

**Rollback Triggers:**
- Authentication completely broken (500 errors for all users)
- Video upload fails 100% of attempts
- iOS video playback completely broken
- Database connection failures

## Post-Launch Monitoring (First 24 Hours)

- [ ] Check Vercel Analytics for error rate (target < 1%)
- [ ] Monitor Render logs for exceptions
- [ ] Verify response times < 3 seconds
- [ ] Spot-check video playback on iOS

## Launch Readiness Checklist

- [ ] All smoke tests pass
- [ ] All critical requirements verified
- [ ] No critical blockers
- [ ] Rollback plan documented
- [ ] Post-launch monitoring plan ready
- [ ] User sign-off received

---

## LAUNCH DECISION

**Date:** [date]
**Decision:** [APPROVED / CONDITIONAL / BLOCKED]
**Conditions:** [if conditional]
**Sign-off:** [user name/confirmation]

---

*Soccer Session Planner v1 - Production Launch Verification*
```

Populate with actual results from all testing phases.
  </action>
  <verify>
Final verification document created with launch decision and complete testing summary
  </verify>
  <done>
Final launch verification document complete with sign-off status
  </done>
</task>

</tasks>

<verification>
- Production smoke tests execute successfully (real data created)
- All v1 requirements verified and documented
- All browser testing results consolidated
- Launch decision documented with sign-off
- Rollback plan documented and ready
</verification>

<success_criteria>
- Complete user workflow verified in production
- All 40 v1 requirements mapped to verification status
- Launch decision made (approved, conditional, or blocked)
- Rollback plan documented
- Post-launch monitoring plan ready
</success_criteria>

<output>
After completion, create `.planning/phases/16-final-testing-launch/16-04-SUMMARY.md`
</output>
