---
phase: 11-save-load-sessions
plan: 02
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - frontend/src/components/sessions/SessionListItem.tsx
  - frontend/src/components/sessions/SessionList.tsx
  - frontend/src/pages/SessionsPage.tsx
  - frontend/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User can view list of all saved sessions"
    - "User can delete session with confirmation dialog"
    - "Empty state guides user when no sessions exist"
    - "Sessions list shows session names and creation dates"
  artifacts:
    - path: "frontend/src/pages/SessionsPage.tsx"
      provides: "Sessions list page"
      exports: ["SessionsPage"]
    - path: "frontend/src/components/sessions/SessionList.tsx"
      provides: "Session list component with empty state"
      exports: ["SessionList"]
    - path: "frontend/src/components/sessions/SessionListItem.tsx"
      provides: "Individual session card with actions"
      exports: ["SessionListItem"]
  key_links:
    - from: "frontend/src/components/sessions/SessionList.tsx"
      to: "useSessions hook"
      via: "import from @/hooks/useSessions"
      pattern: "useSessions\\("
    - from: "frontend/src/components/sessions/SessionList.tsx"
      to: "ConfirmDialog"
      via: "import from @/components/ui"
      pattern: "ConfirmDialog"
    - from: "frontend/src/App.tsx"
      to: "SessionsPage"
      via: "Route path=/sessions"
      pattern: 'path="/sessions"'
---

<objective>
Create the sessions list page where users can view, manage, and delete their saved sessions.

Purpose: Provides the core SESS-07 (view list) and SESS-10 (delete with confirmation) requirements. This page becomes the hub for session management.

Output: /sessions route showing all user sessions with delete functionality
</objective>

<execution_context>
@/Users/seijimatsuda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/seijimatsuda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-save-load-sessions/11-RESEARCH.md
@frontend/src/hooks/useSessions.ts
@frontend/src/lib/database.types.ts
@frontend/src/components/ui/Button.tsx
@frontend/src/components/ui/Skeleton.tsx
@frontend/src/pages/AddDrillPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SessionListItem component</name>
  <files>frontend/src/components/sessions/SessionListItem.tsx</files>
  <action>
Create `frontend/src/components/sessions/SessionListItem.tsx`:

Props interface:
```typescript
interface SessionListItemProps {
  session: Session
  onLoad: () => void
  onDelete: () => void
}
```

Component structure:
1. Card container with rounded border, padding, shadow-sm, hover:shadow-md transition
2. Session name as h3 with font-medium, text-gray-900
3. Creation date formatted with toLocaleDateString() - text-sm text-gray-500
4. Action buttons row at bottom:
   - "Load" button (primary variant) - calls onLoad
   - "Delete" button (ghost or secondary variant with text-red-600) - calls onDelete

Styling notes:
- Use Tailwind classes consistent with codebase
- 44px min touch targets on buttons (use Button component)
- Card should work in grid layout (no fixed width)
- Consider mobile layout (stack buttons on narrow screens if needed)

Import Session type from @/lib/database.types
Import Button from @/components/ui
  </action>
  <verify>`cd frontend && npx tsc --noEmit` passes</verify>
  <done>SessionListItem renders session info with Load and Delete buttons</done>
</task>

<task type="auto">
  <name>Task 2: Create SessionList component with delete flow</name>
  <files>frontend/src/components/sessions/SessionList.tsx</files>
  <action>
Create `frontend/src/components/sessions/SessionList.tsx`:

Props: none (fetches data internally using useAuth for userId)

Component logic:
1. Get user from useAuth()
2. Fetch sessions with useSessions(user?.id)
3. Get useDeleteSession mutation
4. Local state: deleteTarget (Session | null) for dialog

Rendering:
1. Loading state: Show Skeleton components (3 placeholder cards)
2. Empty state: Centered message "No saved sessions", description "Create your first session by building a grid in the session planner.", Button to navigate to /planner (will exist in Phase 10)
3. Sessions exist: Grid layout (gap-4, md:grid-cols-2, lg:grid-cols-3)
4. Map sessions to SessionListItem components
5. ConfirmDialog for delete:
   - isOpen={deleteTarget !== null}
   - onClose={() => setDeleteTarget(null)}
   - title={`Delete "${deleteTarget?.name}"?`}
   - message="This will permanently delete this session. This action cannot be undone."
   - onConfirm: async handler that calls deleteMutation.mutateAsync(deleteTarget.id), then setDeleteTarget(null), show toast.success
   - loading={deleteMutation.isPending}

Navigation:
- onLoad handler: navigate(`/planner?session=${session.id}`) - Phase 10 will handle this param
- onDelete handler: setDeleteTarget(session)

Imports:
- useAuth from @/contexts/AuthContext
- useSessions, useDeleteSession from @/hooks/useSessions
- useNavigate from react-router-dom
- toast from sonner
- ConfirmDialog, Button, Skeleton from @/components/ui
- SessionListItem from ./SessionListItem
  </action>
  <verify>`cd frontend && npx tsc --noEmit` passes</verify>
  <done>SessionList fetches data, shows empty/loading/list states, delete with confirmation works</done>
</task>

<task type="auto">
  <name>Task 3: Create SessionsPage and wire route</name>
  <files>frontend/src/pages/SessionsPage.tsx, frontend/src/App.tsx</files>
  <action>
Create `frontend/src/pages/SessionsPage.tsx`:

Follow AddDrillPage pattern for consistency:
1. Import AppShell from @/components/layout/AppShell
2. Import Container from @/components/layout/Container
3. Import SessionList from @/components/sessions/SessionList
4. Import Button from @/components/ui
5. Import useNavigate from react-router-dom

Page structure:
```tsx
export function SessionsPage() {
  const navigate = useNavigate()

  return (
    <AppShell>
      <Container>
        <div className="flex items-center justify-between mb-6">
          <h1 className="text-2xl font-bold text-gray-900">My Sessions</h1>
          <Button onClick={() => navigate('/planner')}>
            New Session
          </Button>
        </div>
        <SessionList />
      </Container>
    </AppShell>
  )
}
```

Update `frontend/src/App.tsx`:
1. Import SessionsPage
2. Add route inside ProtectedRoute:
   ```tsx
   <Route path="/sessions" element={<SessionsPage />} />
   ```
3. Remove or update the placeholder comment for sessions if it exists
  </action>
  <verify>
1. `cd frontend && npx tsc --noEmit` passes
2. `cd frontend && npm run build` succeeds
  </verify>
  <done>
- SessionsPage renders with header and SessionList
- /sessions route works for authenticated users
- Page follows established layout patterns
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npx tsc --noEmit` passes
2. `cd frontend && npm run build` succeeds
3. Start dev server, login, navigate to /sessions:
   - Empty state shows if no sessions
   - Sessions list appears if sessions exist
   - Delete button opens confirmation dialog
   - Confirm delete removes session and updates list
</verification>

<success_criteria>
- /sessions route accessible to authenticated users
- Sessions list displays with loading/empty/populated states
- Delete confirmation dialog appears before deleting
- Successful delete shows toast and updates list
- Empty state has call-to-action for new session
</success_criteria>

<output>
After completion, create `.planning/phases/11-save-load-sessions/11-02-SUMMARY.md`
</output>
