---
phase: 11-save-load-sessions
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/src/components/ui/Dialog.tsx
  - frontend/src/components/ui/index.ts
autonomous: true

must_haves:
  truths:
    - "Headless UI Dialog is installed and working"
    - "ConfirmDialog component is reusable for any delete confirmation"
    - "Dialog is accessible (focus trap, ESC to close, click-outside)"
  artifacts:
    - path: "frontend/src/components/ui/Dialog.tsx"
      provides: "Reusable ConfirmDialog component"
      exports: ["ConfirmDialog"]
    - path: "frontend/src/components/ui/index.ts"
      provides: "Barrel export for Dialog"
      contains: "Dialog"
  key_links:
    - from: "frontend/src/components/ui/Dialog.tsx"
      to: "@headlessui/react"
      via: "import Dialog, DialogPanel, DialogTitle, DialogBackdrop"
      pattern: "import.*@headlessui/react"
---

<objective>
Install Headless UI and create a reusable ConfirmDialog component for delete confirmations.

Purpose: Provide accessible modal dialog for destructive actions (session delete, future drill delete). Headless UI handles focus management, ESC key, click-outside, and ARIA attributes automatically.

Output: ConfirmDialog component exported from components/ui
</objective>

<execution_context>
@/Users/seijimatsuda/.claude/get-shit-done/workflows/execute-plan.md
@/Users/seijimatsuda/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-save-load-sessions/11-RESEARCH.md
@frontend/src/components/ui/Button.tsx
@frontend/src/components/ui/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Headless UI package</name>
  <files>frontend/package.json</files>
  <action>
Install @headlessui/react package:
```bash
cd frontend && npm install @headlessui/react
```

This provides accessible UI primitives including Dialog, DialogPanel, DialogTitle, DialogBackdrop. Version 2.x supports React 18 and includes all accessibility features (focus trap, ESC handling, click-outside, ARIA) out of the box.
  </action>
  <verify>Run `npm ls @headlessui/react` in frontend directory - shows installed version 2.x</verify>
  <done>@headlessui/react appears in package.json dependencies</done>
</task>

<task type="auto">
  <name>Task 2: Create ConfirmDialog component</name>
  <files>frontend/src/components/ui/Dialog.tsx, frontend/src/components/ui/index.ts</files>
  <action>
Create `frontend/src/components/ui/Dialog.tsx` with ConfirmDialog component:

1. Import from @headlessui/react: Dialog, DialogPanel, DialogTitle, DialogBackdrop
2. Create ConfirmDialog component with props:
   - isOpen: boolean
   - onClose: () => void
   - title: string
   - message: string
   - onConfirm: () => void
   - confirmText?: string (default: "Delete")
   - confirmVariant?: "danger" | "primary" (default: "danger")
   - loading?: boolean (for mutation pending state)

3. Structure:
   - Dialog wrapper with open={isOpen} onClose={onClose}
   - DialogBackdrop with fixed inset-0 bg-black/30 for overlay
   - Centered container for DialogPanel
   - DialogPanel with max-w-sm, rounded-lg, bg-white, p-6, shadow-xl
   - DialogTitle with title prop
   - Message paragraph
   - Button row with Cancel (secondary) and Confirm (danger/primary based on variant)

4. Use existing Button component from ./Button
5. Apply Tailwind classes matching codebase conventions (see Button.tsx for reference)
6. Ensure 44px min touch targets on buttons (already handled by Button component)

Update `frontend/src/components/ui/index.ts` to export ConfirmDialog.

Key implementation notes:
- DO NOT pass aria-hidden to DialogBackdrop (Headless UI handles this)
- Use className="relative z-50" on Dialog for proper stacking
- Cancel button should call onClose, not a separate prop
- Loading prop should be passed to confirm Button's loading prop
  </action>
  <verify>
1. TypeScript compiles: `cd frontend && npx tsc --noEmit`
2. Component imports work: verify no import errors in index.ts
  </verify>
  <done>
- Dialog.tsx exports ConfirmDialog component with all props
- index.ts includes ConfirmDialog export
- TypeScript compiles without errors
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm ls @headlessui/react` shows version 2.x installed
2. `cd frontend && npx tsc --noEmit` passes with no errors
3. ConfirmDialog can be imported: `import { ConfirmDialog } from '@/components/ui'`
</verification>

<success_criteria>
- Headless UI installed as dependency
- ConfirmDialog component created with accessible modal behavior
- Component exported from ui barrel file
- TypeScript compiles successfully
</success_criteria>

<output>
After completion, create `.planning/phases/11-save-load-sessions/11-01-SUMMARY.md`
</output>
