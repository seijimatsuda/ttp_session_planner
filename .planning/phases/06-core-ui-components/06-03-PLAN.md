---
phase: 06-core-ui-components
plan: 03
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - frontend/src/components/layout/AppShell.tsx
  - frontend/src/components/layout/Container.tsx
  - frontend/src/components/layout/index.ts
autonomous: true

must_haves:
  truths:
    - "Layout adapts between mobile (single column) and desktop (sidebar + main)"
    - "Mobile menu button has 44px touch target"
    - "Sidebar slides in on mobile, fixed on desktop"
    - "Container provides consistent page padding"
  artifacts:
    - path: "frontend/src/components/layout/AppShell.tsx"
      provides: "Responsive app layout with sidebar"
      exports: ["AppShell"]
      contains: "md:flex-row"
    - path: "frontend/src/components/layout/Container.tsx"
      provides: "Content container with responsive padding"
      exports: ["Container"]
  key_links:
    - from: "frontend/src/components/layout/AppShell.tsx"
      to: "frontend/src/lib/utils.ts"
      via: "cn() import"
      pattern: "import.*cn.*from"
---

<objective>
Create responsive layout components for the application shell and content containers.

Purpose: The AppShell provides the structural foundation for all pages - sidebar navigation on desktop, slide-in drawer on mobile. Container ensures consistent content width and padding. This enables responsive design without per-page layout code.

Output: AppShell and Container components ready for use as page wrappers
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/06-core-ui-components/06-RESEARCH.md
@.planning/phases/06-core-ui-components/06-01-SUMMARY.md

# Reference for cn() utility
@frontend/src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AppShell responsive layout component</name>
  <files>frontend/src/components/layout/AppShell.tsx</files>
  <action>
Create the main application shell with responsive sidebar behavior.

**AppShell.tsx:**
```typescript
// frontend/src/components/layout/AppShell.tsx
import { useState, type ReactNode } from "react";
import { cn } from "@/lib/utils";

export interface AppShellProps {
  /** Main page content */
  children: ReactNode;
  /** Sidebar content - navigation, user info, etc. */
  sidebar?: ReactNode;
  /** Header content - page title, actions */
  header?: ReactNode;
}

/**
 * Responsive application shell with sidebar navigation.
 *
 * - Mobile: Full-width content, hamburger menu opens slide-in sidebar
 * - Tablet/Desktop (md+): Fixed sidebar with main content area
 *
 * @example
 * <AppShell
 *   sidebar={<Navigation />}
 *   header={<h1>Page Title</h1>}
 * >
 *   <YourPageContent />
 * </AppShell>
 */
export function AppShell({ children, sidebar, header }: AppShellProps) {
  const [sidebarOpen, setSidebarOpen] = useState(false);

  return (
    <div className="min-h-screen bg-gray-100">
      {/* Mobile sidebar overlay - click to close */}
      {sidebarOpen && (
        <div
          className="fixed inset-0 z-40 bg-black/50 md:hidden"
          onClick={() => setSidebarOpen(false)}
          aria-hidden="true"
        />
      )}

      {/* Sidebar */}
      {sidebar && (
        <aside
          className={cn(
            // Base styles
            "fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",
            // Mobile: slide-in transform
            "transform transition-transform duration-200 ease-in-out",
            // Desktop: always visible, no transform
            "md:translate-x-0 md:static md:shadow-none md:border-r md:border-gray-200",
            // Mobile: slide based on state
            sidebarOpen ? "translate-x-0" : "-translate-x-full"
          )}
        >
          {/* Mobile close button */}
          <div className="flex items-center justify-between h-16 px-4 border-b md:hidden">
            <span className="font-semibold text-gray-900">Menu</span>
            <button
              onClick={() => setSidebarOpen(false)}
              className="min-h-11 min-w-11 flex items-center justify-center rounded-lg hover:bg-gray-100"
              aria-label="Close menu"
            >
              <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>

          {/* Sidebar content */}
          <div className="overflow-y-auto h-[calc(100vh-4rem)] md:h-screen">
            {sidebar}
          </div>
        </aside>
      )}

      {/* Main content area */}
      <div className={cn(sidebar && "md:ml-64")}>
        {/* Header bar */}
        <header className="sticky top-0 z-30 bg-white border-b border-gray-200">
          <div className="flex items-center h-16 px-4 gap-4">
            {/* Mobile menu button - only show if sidebar exists */}
            {sidebar && (
              <button
                onClick={() => setSidebarOpen(true)}
                className="min-h-11 min-w-11 flex items-center justify-center rounded-lg hover:bg-gray-100 md:hidden"
                aria-label="Open menu"
              >
                <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                </svg>
              </button>
            )}

            {/* Header content */}
            <div className="flex-1">
              {header}
            </div>
          </div>
        </header>

        {/* Page content */}
        <main className="p-4 md:p-6 lg:p-8">
          {children}
        </main>
      </div>
    </div>
  );
}
```

**Key details:**
- Mobile menu button has min-h-11 min-w-11 (44px touch target)
- Close button in sidebar also has 44px touch target
- Sidebar slides in from left on mobile with backdrop
- Backdrop click closes sidebar
- Desktop shows fixed sidebar with ml-64 offset on main content
- Header is sticky for persistent navigation
  </action>
  <verify>
1. `cd frontend && npx tsc --noEmit` - no TypeScript errors
2. Grep for touch targets: `grep -n "min-h-11" frontend/src/components/layout/AppShell.tsx`
   - Should find at least 2 occurrences (menu button, close button)
3. Grep for responsive breakpoint: `grep -n "md:" frontend/src/components/layout/AppShell.tsx`
   - Should find multiple md: prefixes for responsive behavior
  </verify>
  <done>
- AppShell accepts children, sidebar, header props
- Mobile: hamburger menu triggers slide-in sidebar
- Desktop: sidebar fixed at left, main content offset
- Both menu buttons have 44px touch targets
- Backdrop overlay closes sidebar on mobile
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Container component and barrel export</name>
  <files>
    frontend/src/components/layout/Container.tsx
    frontend/src/components/layout/index.ts
  </files>
  <action>
Create Container for consistent content width and barrel export.

**Container.tsx:**
```typescript
// frontend/src/components/layout/Container.tsx
import { cn } from "@/lib/utils";

export interface ContainerProps {
  /** Content to contain */
  children: React.ReactNode;
  /** Additional CSS classes */
  className?: string;
  /** Max width variant */
  size?: "sm" | "md" | "lg" | "xl" | "full";
}

/**
 * Content container with max-width and responsive padding.
 *
 * @example
 * <Container>
 *   <h1>Page content with max-width</h1>
 * </Container>
 *
 * <Container size="sm">
 *   <Form /> {/* Narrow form container *\/}
 * </Container>
 */
export function Container({ children, className, size = "lg" }: ContainerProps) {
  return (
    <div
      className={cn(
        "mx-auto w-full px-4 sm:px-6 lg:px-8",
        // Size variants
        size === "sm" && "max-w-xl",
        size === "md" && "max-w-3xl",
        size === "lg" && "max-w-5xl",
        size === "xl" && "max-w-7xl",
        size === "full" && "max-w-none",
        className
      )}
    >
      {children}
    </div>
  );
}
```

**index.ts** - Barrel export:
```typescript
// frontend/src/components/layout/index.ts
export { AppShell, type AppShellProps } from "./AppShell";
export { Container, type ContainerProps } from "./Container";
```
  </action>
  <verify>
1. `cd frontend && npx tsc --noEmit` - no TypeScript errors
2. Import test - add to App.tsx temporarily:
   ```typescript
   import { AppShell, Container } from './components/layout';
   ```
   Should compile without errors.
  </verify>
  <done>
- Container with 5 size variants (sm, md, lg, xl, full)
- Container has responsive padding (px-4, sm:px-6, lg:px-8)
- Barrel export includes AppShell and Container
- Type exports available for consumers
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `cd frontend && npx tsc --noEmit` passes
2. `npm run build` succeeds
3. AppShell has responsive md: breakpoints
4. Menu buttons have 44px touch targets (min-h-11 min-w-11)
5. Barrel export works: `import { AppShell, Container } from './components/layout'`
</verification>

<success_criteria>
- [ ] AppShell with responsive sidebar (slide-in mobile, fixed desktop)
- [ ] Mobile menu button with 44px touch target
- [ ] Sidebar close button with 44px touch target
- [ ] Backdrop overlay closes sidebar on mobile tap
- [ ] Container with 5 size variants
- [ ] Container with responsive padding
- [ ] Barrel export at components/layout/index.ts
- [ ] TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/06-core-ui-components/06-03-SUMMARY.md`
</output>
